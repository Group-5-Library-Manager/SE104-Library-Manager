<UserControl x:Class="SE104_Library_Manager.Views.Book.BookView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:SE104_Library_Manager.Views.Book"
             xmlns:converters="clr-namespace:SE104_Library_Manager.Converters"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">

    <UserControl.Resources>
        <converters:PrefixConverter x:Key="PrefixConverter" />
        <converters:ReaderStatusMultiConverter x:Key="ReaderStatusMultiConverter" />
        <converters:DateOnlyConverter x:Key="DateOnlyConverter" />
        <converters:DateOnlyFormattedConverter x:Key="DateOnlyFormattedConverter" />
    </UserControl.Resources>

    <Grid Margin="20">
        <TabControl SelectedItem="{Binding SelectedTab, UpdateSourceTrigger=PropertyChanged}">
            <TabItem IsSelected="True" Header="Sách">
                <Grid Margin="0. 20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Border BorderThickness="1"
                        BorderBrush="Black"
                        Padding="20"
                        Grid.Row="0">
                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Mã sách: "
                                       FontWeight="SemiBold" />
                                <TextBlock Text="{Binding SelectedBookForEdit.MaSach, Converter={StaticResource PrefixConverter}, ConverterParameter=S}"
                                       FontWeight="SemiBold" />
                                <TextBlock Text="Ngày nhập: "
                                       FontWeight="SemiBold"
                                       Margin="40, 0, 0, 0"/>
                                <TextBlock Text="{Binding SelectedBookForEdit.NgayNhap, Converter={StaticResource DateOnlyFormattedConverter}}"
                                       FontWeight="SemiBold" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                                <TextBlock Text="Tên sách: "
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"/>
                                <Border BorderThickness="0"
                                        CornerRadius="5"
                                        Background="#EEEEEE"
                                        Width="250">
                                    <TextBox BorderThickness="0"
                                         Background="Transparent"
                                         Padding="8, 4"
                                         Text="{Binding SelectedBookForEdit.TenSach}"
                                         VerticalContentAlignment="Center" />
                                </Border>

                                <TextBlock Text="Năm xuất bản: "
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"
                                       Margin="20, 0, 0, 0"/>
                                <Border BorderThickness="0"
                                        CornerRadius="5"
                                        Background="#EEEEEE"
                                        Width="100">
                                    <TextBox BorderThickness="0"
                                         Background="Transparent"
                                         Padding="8, 4"
                                         Text="{Binding SelectedBookForEdit.NamXuatBan}"
                                         VerticalContentAlignment="Center" />
                                </Border>

                                <TextBlock Text="Trị giá: "
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"
                                       Margin="20, 0, 0, 0"/>
                                <Border BorderThickness="0"
                                        CornerRadius="5"
                                        Background="#EEEEEE"
                                        Width="200">
                                    <TextBox BorderThickness="0"
                                         Background="Transparent"
                                         Padding="8, 4"
                                         Text="{Binding SelectedBookForEdit.TriGia}"
                                         VerticalContentAlignment="Center" />
                                </Border>
                                <TextBlock Text=" VNĐ"
                                       VerticalAlignment="Center"
                                       Margin="20, 0, 0, 0"/>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                                <TextBlock Text="Mã thể loại: "
                                           FontWeight="SemiBold"
                                           VerticalAlignment="Center" />
                                <Border BorderThickness="0"
                                        CornerRadius="5"
                                        Background="#EEEEEE"
                                        Padding="2"
                                        Width="200">
                                    <ComboBox BorderThickness="0"
                                          Padding="8,4"
                                          VerticalContentAlignment="Center"
                                          ItemsSource="{Binding DsTheLoai}"
                                          SelectedValuePath="MaTheLoai"
                                          DisplayMemberPath="TenTheLoai"
                                          SelectedValue="{Binding SelectedBookForEdit.MaTheLoai}"/>
                                </Border>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                                <TextBlock Text="Mã tác giả: "
                                           FontWeight="SemiBold"
                                           VerticalAlignment="Center" />
                                <Border BorderThickness="0"
                                        CornerRadius="5"
                                        Background="#EEEEEE"
                                        Padding="2"
                                        Width="200">
                                    <ComboBox BorderThickness="0"
                                          Padding="8,4"
                                          VerticalContentAlignment="Center"
                                          ItemsSource="{Binding DsTacGia}"
                                          SelectedValuePath="MaTacGia"
                                          DisplayMemberPath="TenTacGia"
                                          SelectedValue="{Binding SelectedBookForEdit.MaTacGia}"/>
                                </Border>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                                <TextBlock Text="Mã NXB: "
                                           FontWeight="SemiBold"
                                           VerticalAlignment="Center" />
                                <Border BorderThickness="0"
                                        CornerRadius="5"
                                        Background="#EEEEEE"
                                        Padding="2"
                                        Width="200">
                                    <ComboBox BorderThickness="0"
                                          Padding="8,4"
                                          VerticalContentAlignment="Center"
                                          ItemsSource="{Binding DsNXB}"
                                          SelectedValuePath="MaNhaXuatBan"
                                          DisplayMemberPath="TenNhaXuatBan"
                                          SelectedValue="{Binding SelectedBookForEdit.MaNhaXuatBan}"/>
                                </Border>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal"
                                    Margin="0, 40, 0, 0">
                                <Button Content="Cập nhật"
                                    Width="150"
                                    Command="{Binding EditBookCommand}"
                                    Style="{StaticResource PrimaryButtonStyle}"
                                    Margin="0, 0, 20, 0"/>
                                <Button Content="Xóa"
                                    Width="150"
                                    Command="{Binding DeleteBookCommand}"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Margin="20, 0, 20, 0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <Border BorderThickness="0"
                        CornerRadius="10"
                        Margin="0, 40, 0, 0"
                        Padding="20"
                        Grid.Row="1">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FF536FB5" Offset="0"/>
                                <GradientStop Color="#FF24304F" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <StackPanel Orientation="Horizontal" Grid.Row="0">
                                <Border BorderThickness="0"
                                    CornerRadius="15"
                                    Background="White"
                                    Height="40"
                                    Width="350"
                                    Padding="10, 0, 10, 0">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="0">
                                            <Grid>
                                                <TextBox x:Name="SearchSach"
                                                     Text="{Binding SearchBookQuery, UpdateSourceTrigger=PropertyChanged}"
                                                     VerticalAlignment="Center" 
                                                     HorizontalAlignment="Stretch" 
                                                     Margin="5"
                                                     Padding="5,0"
                                                     BorderThickness="0"
                                                     VerticalContentAlignment="Center" />
                                                <TextBlock Text="Tìm kiếm"
                                                       IsHitTestVisible="False"
                                                       VerticalAlignment="Center"
                                                       Margin="15,0,0,0"
                                                       Foreground="DarkGray"
                                                       HorizontalAlignment="Left">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Visibility" Value="Collapsed" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=SearchSach}" Value="">
                                                                    <Setter Property="Visibility" Value="Visible" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Grid>
                                        </Grid>
                                        <Button Grid.Column="1"
                                            Command="{Binding SearchBooksCommand}">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid>
                                                        <Ellipse x:Name="ellipse"
                                                             Width="40"
                                                             Height="40"
                                                             Fill="Transparent"
                                                             Stroke="Transparent"
                                                             StrokeThickness="0" />

                                                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                    </Grid>

                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="ellipse" Property="Fill" Value="#EEE" />
                                                        </Trigger>

                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter TargetName="ellipse" Property="Fill" Value="#CCC" />
                                                        </Trigger>

                                                        <Trigger Property="IsEnabled" Value="False">
                                                            <Setter TargetName="ellipse" Property="Opacity" Value="0.5" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>

                                            <Image Source="/Assets/icon_search.png" Stretch="Uniform" Width="30" Height="30" />
                                        </Button>

                                    </Grid>
                                </Border>

                                <Button Content="Thêm sách"
                                    Command="{Binding AddBookCommand}"
                                    Margin="40, 0, 0, 0"
                                    Style="{StaticResource AddButtonDarkIconStyle}" />
                                <Button Content="Nhập sách"
                                    Command="{Binding ImportBooksCommand}"
                                    Margin="10, 0, 0, 0"
                                    Style="{StaticResource AddButtonDarkIconStyle}" />
                            </StackPanel>


                            <Grid Background="White"
                                Grid.Row="1"
                                Margin="0, 40, 0, 0">
                                <DataGrid SelectionMode="Single"
                                        AutoGenerateColumns="False"
                                        Background="Transparent"
                                        CanUserReorderColumns="False"
                                        CanUserResizeRows="False"
                                        CanUserAddRows="False"
                                        CanUserDeleteRows="False"
                                        BorderThickness="0"
                                        IsReadOnly="True"
                                        HeadersVisibility="Column"
                                        HorizontalScrollBarVisibility="Hidden"
                                        VerticalScrollBarVisibility="Hidden"
                                        ItemsSource="{Binding DsSach}"
                                        SelectedItem="{Binding SelectedBook}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Mã sách" Width="*" Binding="{Binding MaSach, Converter={StaticResource PrefixConverter}, ConverterParameter=S}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>

                                        <DataGridTextColumn Header="Tên sách" Width="*" Binding="{Binding TenSach}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>

                                        <DataGridTextColumn Header="Thể loại" Width="*" Binding="{Binding TheLoai.TenTheLoai}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold" />
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>

                                        <DataGridTextColumn Header="Tác giả" Width="*" Binding="{Binding TacGia.TenTacGia}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold" />
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>

                                        <DataGridTextColumn Header="Năm xuất bản" Width="*" Binding="{Binding NamXuatBan}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>

                                        <DataGridTextColumn Header="Nhà xuất bản" Width="*" Binding="{Binding NhaXuatBan.TenNhaXuatBan}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold" />
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Còn lại" Width="*" Binding="{Binding SoLuongHienCo}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold" />
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Tình trạng" Width="*" Binding="{Binding TrangThai}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold" />
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <TabItem Header="Thể loại">
                <Grid Margin="0. 20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Border BorderThickness="1"
                        BorderBrush="Black"
                        Padding="20"
                        Grid.Row="0">
                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Mã loại: "
                                       FontWeight="SemiBold" />
                                <TextBlock Text="{Binding SelectedGenreForEdit.MaTheLoai, Converter={StaticResource PrefixConverter}, ConverterParameter=TL}"
                                       FontWeight="SemiBold" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                                <TextBlock Text="Tên loại: "
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"/>
                                <Border BorderThickness="0"
                                    CornerRadius="5"
                                    Background="#EEEEEE"
                                    Width="250">
                                    <TextBox BorderThickness="0"
                                         Background="Transparent"
                                         Padding="8, 4"
                                         Text="{Binding SelectedGenreForEdit.TenTheLoai}"
                                         VerticalContentAlignment="Center" />
                                </Border>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal"
                                    Margin="0, 40, 0, 0">
                                <Button Content="Cập nhật"
                                    Width="150"
                                    Command="{Binding EditGenreCommand}"
                                    Style="{StaticResource PrimaryButtonStyle}"
                                    Margin="0, 0, 20, 0"/>
                                <Button Content="Xóa"
                                    Width="150"
                                    Command="{Binding DeleteGenreCommand}"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Margin="20, 0, 0, 0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <Border BorderThickness="0"
                        CornerRadius="10"
                        Margin="0, 40, 0, 0"
                        Padding="20"
                        Grid.Row="1">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FF536FB5" Offset="0"/>
                                <GradientStop Color="#FF24304F" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <StackPanel Orientation="Horizontal" Grid.Row="0">
                                <Border BorderThickness="0"
                                    CornerRadius="15"
                                    Background="White"
                                    Height="40"
                                    Width="350"
                                    Padding="10, 0, 10, 0">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="0">
                                            <Grid>
                                                <TextBox x:Name="SearchTheLoai" 
                                                     Text="{Binding SearchGenreQuery, UpdateSourceTrigger=PropertyChanged}"
                                                     VerticalAlignment="Center" 
                                                     HorizontalAlignment="Stretch" 
                                                     Margin="5"
                                                     Padding="5,0"
                                                     BorderThickness="0"
                                                     VerticalContentAlignment="Center" />
                                                <TextBlock Text="Tìm kiếm"
                                                       IsHitTestVisible="False"
                                                       VerticalAlignment="Center"
                                                       Margin="15,0,0,0"
                                                       Foreground="DarkGray"
                                                       HorizontalAlignment="Left">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Visibility" Value="Collapsed" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=SearchTheLoai}" Value="">
                                                                    <Setter Property="Visibility" Value="Visible" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Grid>
                                        </Grid>
                                        <Button Grid.Column="1"
                                            Command="{Binding SearchGenresCommand}">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid>
                                                        <Ellipse x:Name="ellipse"
                                                             Width="40"
                                                             Height="40"
                                                             Fill="Transparent"
                                                             Stroke="Transparent"
                                                             StrokeThickness="0" />

                                                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                    </Grid>

                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="ellipse" Property="Fill" Value="#EEE" />
                                                        </Trigger>

                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter TargetName="ellipse" Property="Fill" Value="#CCC" />
                                                        </Trigger>

                                                        <Trigger Property="IsEnabled" Value="False">
                                                            <Setter TargetName="ellipse" Property="Opacity" Value="0.5" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>

                                            <Image Source="/Assets/icon_search.png" Stretch="Uniform" Width="30" Height="30" />
                                        </Button>

                                    </Grid>
                                </Border>

                                <Button Content="Thêm thể loại"
                                    Margin="40, 0, 0, 0"
                                    Command="{Binding AddGenreCommand}"
                                    Style="{StaticResource AddButtonDarkIconStyle}" />
                            </StackPanel>


                            <Grid Background="White"
                                Grid.Row="1"
                                Margin="0, 40, 0, 0">
                                <DataGrid SelectionMode="Single"
                                        AutoGenerateColumns="False"
                                        Background="Transparent"
                                        CanUserReorderColumns="False"
                                        CanUserResizeRows="False"
                                        CanUserAddRows="False"
                                        CanUserDeleteRows="False"
                                        BorderThickness="0"
                                        IsReadOnly="True"
                                        HeadersVisibility="Column"
                                        HorizontalScrollBarVisibility="Hidden"
                                        VerticalScrollBarVisibility="Hidden"
                                        ItemsSource="{Binding DsTheLoai}"
                                        SelectedItem="{Binding SelectedGenre}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Mã thể loại" Width="*" Binding="{Binding MaTheLoai, Converter={StaticResource PrefixConverter}, ConverterParameter=TL}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Tên thể loại" Width="*" Binding="{Binding TenTheLoai}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <TabItem Header="Tác giả">
                <Grid Margin="0. 20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Border BorderThickness="1"
                            BorderBrush="Black"
                            Padding="20"
                            Grid.Row="0">
                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Mã tác giả: "
                                           FontWeight="SemiBold" />
                                <TextBlock Text="{Binding SelectedAuthorForEdit.MaTacGia, Converter={StaticResource PrefixConverter}, ConverterParameter=TG}"
                                           FontWeight="SemiBold" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                                <TextBlock Text="Tên tác giả: "
                                           FontWeight="SemiBold"
                                           VerticalAlignment="Center"/>
                                <Border BorderThickness="0"
                                        CornerRadius="5"
                                        Background="#EEEEEE"
                                        Width="250">
                                    <TextBox BorderThickness="0"
                                             Background="Transparent"
                                             Padding="8, 4"
                                             Text="{Binding SelectedAuthorForEdit.TenTacGia}"
                                             VerticalContentAlignment="Center" />
                                </Border>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal"
                                        Margin="0, 40, 0, 0">
                                <Button Content="Cập nhật"
                                        Width="150"
                                        Command="{Binding EditAuthorCommand}"
                                        Style="{StaticResource PrimaryButtonStyle}"
                                        Margin="0, 0, 20, 0"/>
                                <Button Content="Xóa"
                                        Width="150"
                                        Command="{Binding DeleteAuthorCommand}"
                                        Style="{StaticResource SecondaryButtonStyle}"
                                        Margin="20, 0, 0, 0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <Border BorderThickness="0"
                            CornerRadius="10"
                            Margin="0, 40, 0, 0"
                            Padding="20"
                            Grid.Row="1">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FF536FB5" Offset="0"/>
                                <GradientStop Color="#FF24304F" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <StackPanel Orientation="Horizontal" Grid.Row="0">
                                <Border BorderThickness="0"
                                        CornerRadius="15"
                                        Background="White"
                                        Height="40"
                                        Width="350"
                                        Padding="10, 0, 10, 0">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="0">
                                            <Grid>
                                                <TextBox x:Name="SearchTacGia" 
                                                         Text="{Binding SearchAuthorQuery, UpdateSourceTrigger=PropertyChanged}"
                                                         VerticalAlignment="Center" 
                                                         HorizontalAlignment="Stretch" 
                                                         Margin="5"
                                                         Padding="5,0"
                                                         BorderThickness="0"
                                                         VerticalContentAlignment="Center" />
                                                <TextBlock Text="Tìm kiếm"
                                                           IsHitTestVisible="False"
                                                           VerticalAlignment="Center"
                                                           Margin="15,0,0,0"
                                                           Foreground="DarkGray"
                                                           HorizontalAlignment="Left">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Visibility" Value="Collapsed" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=SearchTacGia}" Value="">
                                                                    <Setter Property="Visibility" Value="Visible" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Grid>
                                        </Grid>
                                        <Button Grid.Column="1"
                                                Command="{Binding SearchAuthorsCommand}">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid>
                                                        <Ellipse x:Name="ellipse"
                                                                 Width="40"
                                                                 Height="40"
                                                                 Fill="Transparent"
                                                                 Stroke="Transparent"
                                                                 StrokeThickness="0" />

                                                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                    </Grid>

                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="ellipse" Property="Fill" Value="#EEE" />
                                                        </Trigger>

                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter TargetName="ellipse" Property="Fill" Value="#CCC" />
                                                        </Trigger>

                                                        <Trigger Property="IsEnabled" Value="False">
                                                            <Setter TargetName="ellipse" Property="Opacity" Value="0.5" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>

                                            <Image Source="/Assets/icon_search.png" Stretch="Uniform" Width="30" Height="30" />
                                        </Button>

                                    </Grid>
                                </Border>

                                <Button Content="Thêm tác giả"
                        Margin="40, 0, 0, 0"
                        Command="{Binding AddAuthorCommand}"
                        Style="{StaticResource AddButtonDarkIconStyle}" />
                            </StackPanel>


                            <Grid Background="White"
                                  Grid.Row="1"
                                  Margin="0, 40, 0, 0">
                                <DataGrid SelectionMode="Single"
                                          AutoGenerateColumns="False"
                                          Background="Transparent"
                                          CanUserReorderColumns="False"
                                          CanUserResizeRows="False"
                                          CanUserAddRows="False"
                                          CanUserDeleteRows="False"
                                          BorderThickness="0"
                                          IsReadOnly="True"
                                          HeadersVisibility="Column"
                                          HorizontalScrollBarVisibility="Hidden"
                                          VerticalScrollBarVisibility="Hidden"
                                          ItemsSource="{Binding DsTacGia}"
                                          SelectedItem="{Binding SelectedAuthor}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Mã tác giả" Width="*" Binding="{Binding MaTacGia, Converter={StaticResource PrefixConverter}, ConverterParameter=TG}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Tên tác giả" Width="*" Binding="{Binding TenTacGia}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <TabItem Header="NXB">
                <Grid Margin="0. 20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <Border BorderThickness="1"
                            BorderBrush="Black"
                            Padding="20"
                            Grid.Row="0">
                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Mã nhà xuất bản: "
                                            FontWeight="SemiBold" />
                                <TextBlock Text="{Binding SelectedPublisherForEdit.MaNhaXuatBan, Converter={StaticResource PrefixConverter}, ConverterParameter=NXB}"
                                            FontWeight="SemiBold" />
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="0, 10, 0, 0">
                                <TextBlock Text="Tên nhà xuất bản: "
                                           FontWeight="SemiBold"
                                           VerticalAlignment="Center"/>
                                <Border BorderThickness="0"
                                        CornerRadius="5"
                                        Background="#EEEEEE"
                                        Width="250">
                                    <TextBox BorderThickness="0"
                                             Background="Transparent"
                                             Padding="8, 4"
                                             Text="{Binding SelectedPublisherForEdit.TenNhaXuatBan}"
                                             VerticalContentAlignment="Center" />
                                </Border>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal"
                                        Margin="0, 40, 0, 0">
                                <Button Content="Cập nhật"
                                        Width="150"
                                        Command="{Binding EditPublisherCommand}"
                                        Style="{StaticResource PrimaryButtonStyle}"
                                        Margin="0, 0, 20, 0"/>
                                <Button Content="Xóa"
                                        Width="150"
                                        Command="{Binding DeletePublisherCommand}"
                                        Style="{StaticResource SecondaryButtonStyle}"
                                        Margin="20, 0, 0, 0"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>

                    <Border BorderThickness="0"
                            CornerRadius="10"
                            Margin="0, 40, 0, 0"
                            Padding="20"
                            Grid.Row="1">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                <GradientStop Color="#FF536FB5" Offset="0"/>
                                <GradientStop Color="#FF24304F" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <StackPanel Orientation="Horizontal" Grid.Row="0">
                                <Border BorderThickness="0"
                                        CornerRadius="15"
                                        Background="White"
                                        Height="40"
                                        Width="350"
                                        Padding="10, 0, 10, 0">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="0">
                                            <Grid>
                                                <TextBox x:Name="SearchNXB" 
                                                         Text="{Binding SearchPublisherQuery, UpdateSourceTrigger=PropertyChanged}"
                                                         VerticalAlignment="Center" 
                                                         HorizontalAlignment="Stretch" 
                                                         Margin="5"
                                                         Padding="5,0"
                                                         BorderThickness="0"
                                                         VerticalContentAlignment="Center" />
                                                <TextBlock Text="Tìm kiếm"
                                                           IsHitTestVisible="False"
                                                           VerticalAlignment="Center"
                                                           Margin="15,0,0,0"
                                                           Foreground="DarkGray"
                                                           HorizontalAlignment="Left">
                                                    <TextBlock.Style>
                                                        <Style TargetType="TextBlock">
                                                            <Setter Property="Visibility" Value="Collapsed" />
                                                            <Style.Triggers>
                                                                <DataTrigger Binding="{Binding Text, ElementName=SearchNXB}" Value="">
                                                                    <Setter Property="Visibility" Value="Visible" />
                                                                </DataTrigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                </TextBlock>
                                            </Grid>
                                        </Grid>
                                        <Button Grid.Column="1"
                                Command="{Binding SearchPublishersCommand}">
                                            <Button.Template>
                                                <ControlTemplate TargetType="Button">
                                                    <Grid>
                                                        <Ellipse x:Name="ellipse"
                                                                Width="40"
                                                                Height="40"
                                                                Fill="Transparent"
                                                                Stroke="Transparent"
                                                                StrokeThickness="0" />

                                                        <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" />
                                                    </Grid>

                                                    <ControlTemplate.Triggers>
                                                        <Trigger Property="IsMouseOver" Value="True">
                                                            <Setter TargetName="ellipse" Property="Fill" Value="#EEE" />
                                                        </Trigger>

                                                        <Trigger Property="IsPressed" Value="True">
                                                            <Setter TargetName="ellipse" Property="Fill" Value="#CCC" />
                                                        </Trigger>

                                                        <Trigger Property="IsEnabled" Value="False">
                                                            <Setter TargetName="ellipse" Property="Opacity" Value="0.5" />
                                                        </Trigger>
                                                    </ControlTemplate.Triggers>
                                                </ControlTemplate>
                                            </Button.Template>

                                            <Image Source="/Assets/icon_search.png" Stretch="Uniform" Width="30" Height="30" />
                                        </Button>

                                    </Grid>
                                </Border>

                                <Button Content="Thêm nhà xuất bản"
                                        Margin="40, 0, 0, 0"
                                        Command="{Binding AddPublisherCommand}"
                                        Style="{StaticResource AddButtonDarkIconStyle}" />
                            </StackPanel>


                            <Grid Background="White"
                                    Grid.Row="1"
                                    Margin="0, 40, 0, 0">
                                <DataGrid SelectionMode="Single"
                                            AutoGenerateColumns="False"
                                            Background="Transparent"
                                            CanUserReorderColumns="False"
                                            CanUserResizeRows="False"
                                            CanUserAddRows="False"
                                            CanUserDeleteRows="False"
                                            BorderThickness="0"
                                            IsReadOnly="True"
                                            HeadersVisibility="Column"
                                            HorizontalScrollBarVisibility="Hidden"
                                            VerticalScrollBarVisibility="Hidden"
                                            ItemsSource="{Binding DsNXB}"
                                            SelectedItem="{Binding SelectedPublisher}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Mã nhà xuất bản"  Width="*" Binding="{Binding MaNhaXuatBan, Converter={StaticResource PrefixConverter}, ConverterParameter=NXB}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Tên nhà xuất bản" Width="*" Binding="{Binding TenNhaXuatBan}">
                                            <DataGridTextColumn.HeaderStyle>
                                                <Style TargetType="DataGridColumnHeader">
                                                    <Setter Property="FontWeight" Value="SemiBold"/>
                                                </Style>
                                            </DataGridTextColumn.HeaderStyle>
                                        </DataGridTextColumn>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl>
